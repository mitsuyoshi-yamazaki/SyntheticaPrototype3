# f3d11de

## ユーザープロンプト

```
よろしい。では、このエネルギー崩壊の仕様に合わせて、現在実装されているコードを変更せよ
```

## 実行内容

エネルギー自然崩壊システムの実装を行った：

1. **EnergyDecaySystemクラスの実装**：
   - 崩壊量計算: `ceil(sqrt(エネルギー量) / 10)` E/tick
   - エネルギーオブジェクトの崩壊処理
   - 半減期推定機能
   - カスタマイズ可能なパラメータ（decayRateDivisor）

2. **Worldクラスへの統合**：
   - tick処理の環境処理フェーズ内で崩壊処理を実行
   - エネルギー生成→崩壊→収集の順序で処理
   - 崩壊したエネルギーは熱として発生

3. **熱システムとの連携**：
   - WorldStateManagerにaddHeatToCellメソッドを追加（現在はスタブ）
   - 完全崩壊時：オブジェクトの全エネルギーが熱に変換
   - 部分崩壊時：崩壊分のエネルギーが熱に変換

4. **テストの実装**：
   - 崩壊量計算のテスト
   - 単一/複数オブジェクトの崩壊処理
   - 完全崩壊によるオブジェクト削除
   - 半減期推定のテスト（小・中・大規模エネルギー）

5. **エクスポート追加**：
   - engine/index.tsにEnergyDecaySystemのエクスポートを追加