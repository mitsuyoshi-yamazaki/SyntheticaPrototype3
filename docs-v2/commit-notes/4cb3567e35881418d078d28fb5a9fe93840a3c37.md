# コミットノート - 4cb3567e35881418d078d28fb5a9fe93840a3c37

## ユーザープロンプト

```
TODO.md の 大きさ・形状の具体的仕様 について実施する

- game-world-requirement.md の基本思想は
v1〜v2系: 現実の物理・化学に近い動作をする、人間が想定していなかった面白い現象が発生することを期待
v3系: オープンエンド性は最低限として、自己複製というコンセプトが動作するアプリケーションの仕様を作成する
であるが、これ・物理は複雑になりそうなので、この仕様では全ゲームオブジェクトを円で定義するものとする
- 非HULLユニットは、 energy-definition.md で定義される構成エネルギー量から大きさが決まるものとする
ダメージを食らって構成エネルギー量が減っても、ユニットの大きさは変わらない
- HULLの大きさは、容積、構成エネルギー量から決定する（HULLが容積を持つのでユニットよりも大きくなることが多いはず）
- エネルギーの大きさ（半径）の計算式は energy-object-physics.md に倣うものとする
```

## 実施内容

大きさ・形状の具体的仕様を定義し、関連ファイルを更新しました。

### 1. object-size-specification.mdの作成

以下の仕様を定義：

- **基本原則**
  - 統一形状: 全てのゲームオブジェクトは円形
  - サイズ計算: オブジェクトの種類により異なるルール
  - ダメージ不変: ユニットがダメージを受けても大きさは変化しない

- **エネルギーオブジェクトのサイズ**
  - energy-object-physics.mdの定義を参照
  - radius = sqrt(energy/π)

- **ユニットのサイズ計算**
  - HULL以外のユニット: radius = sqrt(buildEnergy/π)
  - ダメージによるサイズ不変（buildEnergyで固定）
- **HULLのサイズ**
  - 容積半径: volumeRadius = sqrt(capacity/π)
  - エネルギー半径: energyRadius = sqrt(buildEnergy/π)
  - 合計半径: totalRadius = volumeRadius + energyRadius
  - 内部空間と構造部分を明確に分離

- **具体的なサイズ例**
  - ASSEMBLER (1000E): 半径約17.84
  - COMPUTER (600E): 半径約13.82
  - HULL (容量100, 200E): 総半径約13.62

### 2. game-world-requirement.mdの更新

以下の箇所を更新：

- オブジェクトの基本仕様（165行目）: 円形であることを明記
- ユニットサイズの仕様（379行目）: object-size-specification.mdへの参照追加

### 3. TODO.mdの更新

- 「大きさ・形状の具体的仕様」タスクを完了に変更

### 実装上の重要ポイント

- サイズ固定フラグの実装（ユニットのダメージ時）
- HULLの内部空間と構造部分の区別
- デバッグ表示での視覚化
- パラメータ調整用のスケーリング関数
