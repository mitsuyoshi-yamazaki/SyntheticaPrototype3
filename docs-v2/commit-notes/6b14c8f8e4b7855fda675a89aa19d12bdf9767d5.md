# 6b14c8f8e4b7855fda675a89aa19d12bdf9767d5 のコミットノート

## ユーザー指示

AssemblerConstructionSystemのコンストラクタ引数に与えられているparametersと、HeatSystemに与えられているparametersは、EnergyParametersを実装したからには不要ではないか。検討せよ

## 実装内容

### 分析結果

1. **AssemblerConstructionSystem**
   - テストでのみ使用され、空の`{}`を渡していた
   - パラメータは本来EnergyParametersから取得すべき

2. **HeatSystem**
   - 既にパラメータをオプショナルにして、デフォルトで`createHeatParametersFromEnergyParams()`を使用する実装済み
   - テスト用にカスタムパラメータを渡せる仕様は維持

3. **WorldStateManager**
   - HeatSystemに不要なパラメータを生成して渡していた

### 実施した変更

1. **AssemblerConstructionSystem**
   - コンストラクタから`parameters`引数を削除
   - `private get parameters()`ゲッターを追加し、EnergyParametersから動的に取得
   - テストも引数なしのコンストラクタ呼び出しに変更

2. **WorldStateManager**
   - HeatSystemのコンストラクタ呼び出しからパラメータ引数を削除
   - 不要な`createHeatParametersFromEnergyParams`のimportを削除

### メリット

- **パラメータ管理の一元化**: EnergyParametersが唯一の真実の源（Single Source of Truth）になった
- **動的な反映**: `setEnergyParameters`でプリセットを変更すると、全システムに即座に反映される
- **コードの簡潔化**: 不要なパラメータの受け渡しが削除され、コードがよりシンプルになった
- **テストの柔軟性**: HeatSystemではテスト用のカスタムパラメータ機能を維持

### 設計判断

- `createHeatParametersFromEnergyParams`関数は残す
  - EnergyParametersとHeatSystemParametersの変換ロジックを担当
  - HeatSystem内部で自動的に呼び出される
  - テスト時にはカスタムパラメータでオーバーライド可能