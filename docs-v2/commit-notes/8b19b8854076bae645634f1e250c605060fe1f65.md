# コミットノート: 8b19b8854076bae645634f1e250c605060fe1f65

## ユーザープロンプト

コミットしたのち進めよ

## 実行内容

UNIT_MEM_WRITE_DYN命令の実装とテスト追加：

### 実装内容

1. **UNIT_MEM_WRITE_DYN命令の実行ロジック**
   - vm-executor.tsにexecuteUnitMemWriteDyn関数を追加
   - 動的アドレス指定によるユニットメモリ書き込み
   - レジスタ指定でアドレスを動的に決定
   - 失敗時もエネルギー消費（仕様通り）

2. **デコーダー対応**
   - vm-decoder.tsでオペランドデコード実装
   - unitId: ユニット種別とインデックス（byte[2]）
   - unitMemAddr: レジスタインデックス（byte[3]）

3. **テスト追加**
   - 正常動作テスト
   - ユニットコンテキストなしエラーテスト
   - findUnit未実装のためエラーハンドリング確認

### 技術的詳細

- オペコード: 0x9b（4バイト命令）
- 第2バイト: ユニット種別（上位4bit）とインデックス（下位4bit）
- 第3バイト: アドレス指定レジスタ（0=A, 1=B, 2=C, 3=D）
- エネルギー消費: 3サイクル（失敗時も消費）

### 次のタスク

CMOV系条件付き移動命令の実装に進む