# d895741のコミットノート

## ユーザー指示

「docs/実装計画/visualData再検討.md を記載した。この実装に取り掛かるうえで、質問はないか確認せよ」

その後、質問への回答を受けて：
「（各質問への回答）」

最終的に：
「よろしい。コミットせよ」

## 実施内容

docs/実装計画/visualData再検討.mdの計画に基づき、visualData管理をHullのattachedUnitsに移動：

1. **型定義の変更**
   - AttachedUnitsInfo型を新規追加（hulls、assemblers、computers配列）
   - Assembler、ComputerからvisualDataプロパティを削除
   - HullのattachedUnitsをObjectId[]からAttachedUnitsInfoに変更

2. **実装の更新**
   - object-factory.ts: 新しいattachedUnits構造でHullを生成
   - assembler-construction-system.ts: visualData削除、attachedUnits新構造対応
   - GameWorld.ts: attachedUnitsの新構造から描画情報を取得
   - render-utils.ts: redistributeVisualPositions関数をcreateAttachedUnitsInfoに変更
   - circuit-connection-system.ts: getAllUnitIdsヘルパー追加で新構造対応

3. **テストの更新**
   - test-helpers.ts: visualData削除、attachedUnits新構造化
   - assembler-construction-system.test.ts: visualData関連のアサーション削除
   - circuit-connection-system.test.ts: attachedUnits新構造でテストデータ作成

これにより、視覚表示用データがゲームロジックと分離され、Hullの接続情報と一体化された構造を実現。
