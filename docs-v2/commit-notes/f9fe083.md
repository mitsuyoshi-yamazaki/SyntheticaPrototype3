# f9fe083 - 一時停止/再開機能を実装（状態を維持）

## ユーザー指示

`GameWorld` がReactコンポーネント（ `GameCanvasPixi` ）に保持されているため、Reactの再描画により `GameWorld` が作り直されてしまうのではないかと考えている。
実際に、停止ボタンを押したのち再起動ボタンを押すと、0tickから再スタートする
しかし一方で、熱マップの表示/非表示操作を行う際はシミュレーションは継続している

この点において、実際どうであるか確認せよ

[確認後]
方法2: isPausedフラグによる実装（推奨）　を実施せよ

## 実施内容

### 問題の分析
1. 停止・再起動で0tickから再スタートする理由：
   - `page.tsx`で停止時にコンポーネントをアンマウント
   - 再起動時に`key`を変更して強制的に再マウント
   - GameWorldが完全に再作成される

2. 熱マップ表示/非表示で継続する理由：
   - 別のuseEffectで処理され、GameWorldは再作成されない

### 解決策の実装
1. **page.tsx の修正**
   - `isPaused`状態を追加（一時停止フラグ）
   - GameCanvasPixiを常にマウント状態に保つ
   - 一時停止中はオーバーレイで表示
   - リセットボタンを別途追加（完全な再初期化用）

2. **GameCanvasPixi.tsx の修正**
   - `isPaused`プロパティを追加
   - `isPausedRef`を使用して最新値を保持
   - ticker内で`isPaused`をチェックして`tick()`の実行を制御
   - 一時停止中もレンダリングは継続
   - デバッグ情報に一時停止状態を表示

## 結果

- 一時停止/再開でゲーム状態が維持される
- tickカウントがリセットされない
- リセットボタンで完全な再初期化が可能
- より直感的なユーザー体験を提供